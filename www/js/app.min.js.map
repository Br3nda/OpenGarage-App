{"version":3,"sources":["app.min.js"],"names":["angular","module","run","$state","$ionicPlatform","$ionicScrollDelegate","$ionicHistory","$location","$document","$window","$rootScope","$ionicLoading","$ionicPopup","$timeout","Utils","ready","open","url","window","cordova","plugins","Keyboard","hideKeyboardAccessoryBar","StatusBar","styleLightContent","backgroundColorByHexString","element","on","scrollTop","navigator","splashscreen","hide","err","version","appVersion","loadingCount","controllers","$on","e","data","canceller","resolve","show","template","title","firstLoadHandler","event","preventDefault","storage","get","JSON","parse","activeController","go","$broadcast","innerWidth","width","config","$stateProvider","$urlRouterProvider","$httpProvider","$compileProvider","$ionicConfigProvider","test","userAgent","platform","spinner","icon","backButton","previousTitleText","text","scrolling","jsScrolling","aHrefSanitizationWhitelist","imgSrcSanitizationWhitelist","state","abstract","templateUrl","controller","views","menuContent","checkValid","$q","$filter","total","length","filterFilter","invalidOrg","mac","remove","reject","set","stringify","interceptors","push","$injector","request","suppressLoader","defer","timeout","promise","retryCount","response","responseError","error","$$state","status","canceled","$http","retryFailed","forwardCache","$scope","showDelete","setController","index","nextViewOptions","historyRoot","deleteController","indexOf","splice","moveItem","item","fromIndex","toIndex","getLogs","reply","isLocal","logs","settings","changePassword","restart","restartController","submit","saveOptions","alert","getControllerOptions","mod","fwv","$ionicSideMenuDelegate","showAddController","closeMenu","toggleLeft","interval","changing","toggleDoor","clearInterval","setInterval","updateController","factory","isFireFox","isIE","query","callback","i","hasOwnProperty","localStorage","getItem","setItem","removeItem","getControllerSettings","ip","auth","method","headers","Content-Type","encodeURIComponent","then","result","filter","pins","door","parseInt","pin","value","dist","rcnt","showLoader","copy","save","extend","when","addController","password","cid","HTMLElement","prototype","click","evt","this","ownerDocument","createEvent","initMouseEvent","defaultView","dispatchEvent","scope","$new","buttons","type","onTap","isValid","params","paramSerializer","pwd","nkey","ckey","reverse"],"mappings":"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","file":"app.min.js","sourcesContent":["/* global angular */\n\n// OpenGarage\n// Controllers are found in controllers.js and utilities are located in utils.js\nangular.module( \"opengarage\", [ \"ionic\", \"opengarage.controllers\", \"opengarage.utils\" ] )\n\t.run( function( $state, $ionicPlatform, $ionicScrollDelegate, $ionicHistory, $location, $document, $window, $rootScope, $ionicLoading, $ionicPopup, $timeout, Utils ) {\n\n\t\t// Ready function fires when the DOM is ready and after deviceready event is fired if Cordova is being used\n\t\t$ionicPlatform.ready( function() {\n\n\t\t\t// Map inAppBrowser to rootScope\n\t\t\t$rootScope.open = function( url ) {\n\t\t\t\twindow.open( url, \"_blank\", \"toolbarposition=top\" );\n\t\t\t};\n\n\t\t\t// Hide the accessory bar by default (remove this to show the accessory bar above the keyboard\n\t\t\t// for form inputs)\n\t\t\tif ( window.cordova && window.cordova.plugins && window.cordova.plugins.Keyboard && window.cordova.plugins.Keyboard.hideKeyboardAccessoryBar ) {\n\t\t\t\twindow.cordova.plugins.Keyboard.hideKeyboardAccessoryBar( true );\n\t\t\t}\n\t\t\tif ( window.StatusBar ) {\n\n\t\t\t\t// Use white text/icons on the status bar\n\t\t        window.StatusBar.styleLightContent();\n\n\t\t        //Change the status bar color to match the header\n                window.StatusBar.backgroundColorByHexString( \"#444\" );\n\n\t\t        // Scroll to the top of the page when the status bar is tapped\n\t\t\t\tangular.element( $window ).on( \"statusTap\", function() {\n\t\t\t\t\t$ionicScrollDelegate.scrollTop();\n\t\t        } );\n\t\t\t}\n\n\t\t    // Hide the splash screen after 500ms of the app being ready\n\t\t    $timeout( function() {\n\t\t        try {\n\t\t            navigator.splashscreen.hide();\n\t\t        } catch ( err ) {}\n\t\t    }, 500 );\n\t\t} );\n\n\t\t// Define version, build number and debug state\n\t\t$rootScope.version = window.appVersion;\n\n\t    // Define total loading requests\n\t    $rootScope.loadingCount = 0;\n\n\t    // Initialize controllers array\n\t    $rootScope.controllers = [];\n\n\t\t// Automatically show a loading message on any AJAX request\n\t\t$rootScope.$on( \"loading:show\", function( e, data ) {\n\n\t\t\t$rootScope.loadingCount++;\n\t\t\t$rootScope.canceller = data.canceller.resolve;\n\t\t\t$ionicLoading.show( {\n\t\t\t\ttemplate: \"<ion-spinner></ion-spinner><br>One moment please<br><button class='button white icon-left ion-ios-close-outline button-clear' ng-click='$root.canceller()'>Cancel</button>\"\n\t\t\t} );\n\t\t} );\n\n\t\t// Automatically hide the loading message after an AJAX request\n\t\t$rootScope.$on( \"loading:hide\", function() {\n\n\t\t\t$rootScope.loadingCount--;\n\t\t\tif ( $rootScope.loadingCount <= 0 ) {\n\t\t\t\t$rootScope.loadingCount = 0;\n\t\t\t\t$ionicLoading.hide();\n\t\t\t}\n\t\t} );\n\n\t\t// Keep the page title locked as the app name\n\t\t$rootScope.$on( \"$ionicView.afterEnter\", function() {\n\t\t\t$document[ 0 ].title = \"OpenGarage\";\n\t\t} );\n\n\t\t// Handle loading of the first page\n\t\tvar firstLoadHandler = $rootScope.$on( \"$stateChangeStart\", function( event ) {\n\n\t\t\t// Unbind event handler so this check is only performed on the first app load\n\t\t    firstLoadHandler();\n\n\t\t    // Prevent any page change from occurring\n\t        event.preventDefault();\n\n\t\t    Utils.storage.get( [ \"activeController\", \"controllers\" ], function( data ) {\n\n\t\t\t\ttry {\n\t\t\t\t\t$rootScope.controllers = JSON.parse( data.controllers );\n\t\t\t\t\t$rootScope.activeController = JSON.parse( data.activeController );\n\t\t\t\t} catch ( err ) {}\n\n\t\t\t\tif ( !$rootScope.controllers ) {\n\t\t\t\t\t$rootScope.controllers = [];\n\t\t\t\t}\n\n\t\t\t\t// Restore the active controller, if available\n\t\t        if ( $rootScope.activeController && typeof $rootScope.activeController === \"object\" ) {\n\n\t\t\t\t\t// If a user object is cached, proceed to load the app while updating user object in the background\n\t\t\t\t\t$state.go( \"app.home\" );\n\t\t        } else {\n\t\t\t\t\t$state.go( \"app.controllerSelect\" );\n\t\t        }\n\t\t    } );\n\t\t} );\n\n\t\t// Resize the main content view to fit when the window changes size\n\t\tangular.element( window ).on( \"resize\", function() {\n\t\t\t$rootScope.$broadcast( \"window:resize\" );\n\t\t\tif ( window.innerWidth > 768 ) {\n\t\t\t\tangular.element( \"#mainContent\" ).width( window.innerWidth - 275 );\n\t\t\t}\n\t\t} );\n\t} )\n\n\t.config( function( $stateProvider, $urlRouterProvider, $httpProvider, $compileProvider, $ionicConfigProvider ) {\n\n\t\tif ( /MSIE\\s|Trident\\/|Edge\\//.test( window.navigator.userAgent ) ) {\n\n\t\t\t// Change the default spinner for IE to android which has JS based animation\n\t\t\t$ionicConfigProvider.platform.default.spinner.icon( \"android\" );\n\t\t}\n\n\t\t// Change the back text to always say 'Back'\n\t\t$ionicConfigProvider.backButton.previousTitleText( false ).text( \"Back\" );\n\n\t\t// Use native scrolling for FireFox\n\t\tif ( /Firefox/.test( navigator.userAgent ) ) {\n\t\t\t$ionicConfigProvider.scrolling.jsScrolling( false );\n\t\t}\n\n\t\t// Modify Ionic's allowed href protocols to allow Firefox, Blackberry, iOS and Chrome support\n\t\t$compileProvider.aHrefSanitizationWhitelist( /^\\s*(https?|ftp|mailto|chrome-extension|app|local|file):/ );\n\n\t\t// Modify Ionic's allowed image source protocols\n\t\t$compileProvider.imgSrcSanitizationWhitelist( /^\\s*(https?|ftp|file|content|blob|ms-appx|x-wmapp0|chrome-extension|app|local):|data:image\\// );\n\n\t\t// Define all available routes and their associated controllers\n\t\t$stateProvider\n\n\t\t\t// Used as the parent route after authentication is complete allowing the same header\n\t\t\t// and side menu's to be used throughout all child views\n\t\t\t.state( \"app\", {\n\t\t\t\turl: \"/app\",\n\t\t\t\tabstract: true,\n\t\t\t\ttemplateUrl: \"templates/menu.html\",\n\t\t\t\tcontroller: \"MenuCtrl\"\n\t\t\t} )\n\n\t\t\t.state( \"app.home\", {\n\t\t\t\turl: \"/home\",\n\t\t\t\tviews: {\n\t\t\t\t\tmenuContent: {\n\t\t\t\t\t\ttemplateUrl: \"templates/home.html\",\n\t\t\t\t\t\tcontroller: \"HomeCtrl\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tresolve: {\n\t\t\t\t\tcheckValid: function( $timeout, $q, $state, $rootScope, $filter, Utils ) {\n\t\t\t\t\t\tvar total = $rootScope.controllers.length,\n\t\t\t\t\t\t\tfilterFilter = $filter( \"filter\" ),\n\t\t\t\t\t\t\tinvalidOrg = ( $rootScope.activeController && filterFilter( $rootScope.controllers, { \"mac\": $rootScope.activeController.mac } ).length === 0 ) ? true : false;\n\n\t\t\t\t\t\tif ( !$rootScope.activeController && total === 1 ) {\n\t\t\t\t\t\t\t$rootScope.activeController = $rootScope.controllers[ 0 ];\n\t\t\t\t\t\t\tUtils.storage.set( { activeController: JSON.stringify( $rootScope.activeController ) } );\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( !$rootScope.activeController || invalidOrg ) {\n\n\t\t\t\t\t\t\tdelete $rootScope.activeController;\n\t\t\t\t\t\t\tUtils.storage.remove( \"activeController\" );\n\n\t\t\t\t\t\t\t// If the active controller is not found in the controller list, show the select controller screen\n\t\t\t\t\t\t\t$timeout( function() {\n\t\t\t\t\t\t\t\t$state.go( \"app.controllerSelect\" );\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\treturn $q.reject();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} )\n\n\t\t\t.state( \"app.controllerSelect\", {\n\t\t\t\turl: \"/controllerSelect\",\n\t\t\t\tviews: {\n\t\t\t\t\tmenuContent: {\n\t\t\t\t\t\ttemplateUrl: \"templates/controllerSelect.html\",\n\t\t\t\t\t\tcontroller: \"ControllerSelectCtrl\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} )\n\n\t\t\t.state( \"app.history\", {\n\t\t\t\turl: \"/history\",\n\t\t\t\tviews: {\n\t\t\t\t\tmenuContent: {\n\t\t\t\t\t\ttemplateUrl: \"templates/history.html\",\n\t\t\t\t\t\tcontroller: \"HistoryCtrl\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tresolve: {\n\t\t\t\t\tcheckValid: function( $rootScope, $q ) {\n\t\t\t\t\t\tif ( !$rootScope.activeController ) {\n\t\t\t\t\t\t\treturn $q.reject();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} )\n\n\t\t\t.state( \"app.settings\", {\n\t\t\t\turl: \"/settings\",\n\t\t\t\tviews: {\n\t\t\t\t\tmenuContent: {\n\t\t\t\t\t\ttemplateUrl: \"templates/settings.html\",\n\t\t\t\t\t\tcontroller: \"SettingsCtrl\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tresolve: {\n\t\t\t\t\tcheckValid: function( $rootScope, $q ) {\n\t\t\t\t\t\tif ( !$rootScope.activeController ) {\n\t\t\t\t\t\t\treturn $q.reject();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} )\n\n\t\t\t.state( \"app.help\", {\n\t\t\t\turl: \"/help\",\n\t\t\t\tviews: {\n\t\t\t\t\tmenuContent: {\n\t\t\t\t\t\ttemplateUrl: \"templates/help.html\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} )\n\n\t\t\t// Defines the otherwise route which will redirect any invalid URL back to the start page\n\t\t\t.state( \"otherwise\", {\n\t\t\t\turl: \"*path\",\n\t\t\t\ttemplate: \"\",\n\t\t\t\tcontroller: function( $state, $rootScope ) {\n\n\t\t\t\t\tif ( $rootScope.activeController ) {\n\t\t\t\t\t\t$state.go( \"app.home\" );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$state.go( \"app.controllerSelect\" );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t// Add an HTTP interceptor\n\t\t$httpProvider.interceptors.push( function( $rootScope, $q, $injector ) {\n\t\t\treturn {\n\t\t\t\trequest: function( config ) {\n\n\t\t\t\t\t// When an AJAX request to the controller is started, fire an event to show a loading message\n\t\t\t\t\tif ( !config.suppressLoader ) {\n\n\t\t\t\t\t\t// Change timeout to a promise we can cancel\n\t\t\t\t\t\tvar canceller = $q.defer();\n\n\t\t\t\t\t\t// Set the timeout to the canceller promise\n\t\t\t\t\t\tconfig.timeout = canceller.promise;\n\n\t\t\t\t\t\t// Set the current retry count to 0\n\t\t\t\t\t\tif ( typeof config.retryCount !== \"number\" ) {\n\t\t\t\t\t\t\tconfig.retryCount = 0;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$rootScope.$broadcast( \"loading:show\", { canceller: canceller } );\n\t\t\t\t\t}\n\n\t\t\t\t\treturn config;\n\t\t\t\t},\n\t\t\t\tresponse: function( response ) {\n\n\t\t\t\t\t// If the request is to the controller, broadcast a hide loading message\n\t\t\t\t\tif ( !response.config.suppressLoader ) {\n\t\t\t\t\t\t$rootScope.$broadcast( \"loading:hide\" );\n\t\t\t\t\t}\n\n\t\t\t\t\treturn response;\n\t\t\t\t},\n\t\t\t\tresponseError: function( error ) {\n\n\t\t\t\t\t// If the timeout value is an object and is resolved, mark request as user canceled\n\t\t\t\t\tif ( error.config.timeout && error.config.timeout.$$state && error.config.timeout.$$state.status === 1 ) {\n\t\t\t\t\t\terror.canceled = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( !error.config.suppressLoader ) {\n\t\t\t\t\t\t$rootScope.$broadcast( \"loading:hide\" );\n\t\t\t\t\t}\n\n\t\t\t\t\t// If the request timed out and is not user canceled, retry the request up to three times\n\t\t\t\t\tif ( error.status <= 0 && !error.canceled ) {\n\t\t\t\t\t\tif ( error.config.retryCount < 3 ) {\n\t\t\t\t\t\t\tvar $http = $injector.get( \"$http\" );\n\n\t\t\t\t\t\t\terror.config.retryCount++;\n\n\t\t\t\t\t\t\t// Return the new promise object\n\t\t\t\t\t\t\treturn $http( error.config );\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// After three timeouts, assume the network is down\n\t\t\t\t\t\t\terror.retryFailed = true;\n\t\t\t\t\t\t\terror.canceled = true;\n\n\t\t\t\t\t\t\treturn $q.reject( error );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn $q.reject( error );\n\t\t\t\t}\n\t\t\t};\n\t\t} );\n\n\t\t// Inform Ionic we want to cache forward views\n\t\t$ionicConfigProvider.views.forwardCache( true );\n\t} );\n\n/* global angular */\n\nangular.module( \"opengarage.controllers\", [ \"opengarage.utils\" ] )\n\n\t.controller( \"ControllerSelectCtrl\", function( $scope, $state, $rootScope, $filter, $ionicHistory, Utils ) {\n\t\t$scope.data = {\n\t\t\tshowDelete: false\n\t\t};\n\n\t\t$scope.setController = function( index ) {\n\t\t\t$rootScope.activeController = $rootScope.controllers[ index ];\n\t\t\tUtils.storage.set( { activeController: JSON.stringify( $rootScope.activeController ) } );\n\n\t\t\t$ionicHistory.nextViewOptions( {\n\t\t\t\thistoryRoot: true\n\t\t\t} );\n\n\t\t\t$state.go( \"app.home\" );\n\t\t};\n\n\t\t$scope.deleteController = function( index ) {\n\t\t\tif ( $rootScope.controllers.indexOf( $rootScope.activeController ) === index ) {\n\t\t\t\tdelete $rootScope.activeController;\n\t\t\t\tUtils.storage.remove( \"activeController\" );\n\t\t\t}\n\n\t\t\t$rootScope.controllers.splice( index, 1 );\n\t\t\tUtils.storage.set( { controllers: JSON.stringify( $rootScope.controllers ) } );\n\t\t};\n\n\t\t$scope.moveItem = function( item, fromIndex, toIndex ) {\n\t\t\t$rootScope.controllers.splice( fromIndex, 1 );\n\t\t\t$rootScope.controllers.splice( toIndex, 0, item );\n\t\t\tUtils.storage.set( { controllers: JSON.stringify( $rootScope.controllers ) } );\n\t\t};\n\t} )\n\n\t.controller( \"HistoryCtrl\", function( $scope, Utils ) {\n\t\t$scope.$on( \"$ionicView.beforeEnter\", function() {\n\t\t\tUtils.getLogs( function( reply ) {\n\t\t\t\tif ( reply ) {\n\t\t\t\t\t$scope.isLocal = true;\n\t\t\t\t\t$scope.logs = reply;\n\t\t\t\t} else {\n\t\t\t\t\t$scope.isLocal = false;\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t} )\n\n\t.controller( \"SettingsCtrl\", function( $scope, $state, $ionicPopup, Utils ) {\n\t\t$scope.settings = {};\n\n\t\t$scope.changePassword = Utils.changePassword;\n\t\t$scope.restart = Utils.restartController;\n\n\t\t$scope.submit = function() {\n\t\t\tUtils.saveOptions( $scope.settings, function( reply ) {\n\t\t\t\tvar text;\n\n\t\t\t\tif ( reply ) {\n\t\t\t\t\ttext = \"Settings saved successfully!\";\n\t\t\t\t\t$state.go( \"app.home\" );\n\t\t\t\t} else {\n\t\t\t\t\ttext = \"Unable to save settings. Please check the connection to the device and try again.\";\n\t\t\t\t}\n\t\t\t\t$ionicPopup.alert( {\n\t\t\t\t\ttemplate: \"<p class='center'>\" + text + \"</p>\"\n\t\t\t\t} );\n\t\t\t} );\n\t\t};\n\n\t\t$scope.$on( \"$ionicView.beforeEnter\", function() {\n\t\t\tUtils.getControllerOptions( function( reply ) {\n\t\t\t\tif ( reply ) {\n\t\t\t\t\t$scope.isLocal = true;\n\n\t\t\t\t\t// Remove unused options to prevent accidental change\n\t\t\t\t\tdelete reply.mod;\n\t\t\t\t\tdelete reply.fwv;\n\t\t\t\t\t$scope.settings = reply;\n\t\t\t\t} else {\n\t\t\t\t\t$scope.isLocal = false;\n\t\t\t\t}\n\t\t\t}, null, true );\n\t\t} );\n\t} )\n\n\t.controller( \"MenuCtrl\", function( $scope, $ionicSideMenuDelegate, Utils ) {\n\n\t\t$scope.showAddController = Utils.showAddController;\n\n\t\t// Function to close the menu which is fired after a side menu link is clicked.\n\t\t// This is done instead of using the menu-close directive to preserve the root history stack\n\t    $scope.closeMenu = function() {\n            $ionicSideMenuDelegate.toggleLeft( false );\n\t    };\n\t} )\n\n\t.controller( \"HomeCtrl\", function( $scope, Utils ) {\n\t\tvar interval;\n\n\t\t$scope.changing = false;\n\n\t\t$scope.toggleDoor = function() {\n\t\t\t$scope.changing = true;\n\n\t\t\tUtils.toggleDoor( function() {\n\t\t\t\t$scope.changing = false;\n\t\t\t} );\n\t\t};\n\n\t\t$scope.$on( \"$ionicView.beforeLeave\", function() {\n\t\t\tclearInterval( interval );\n\t\t} );\n\n\t\t$scope.$on( \"$ionicView.beforeEnter\", function() {\n\t\t\tinterval = setInterval( Utils.updateController, 3000 );\n\t\t} );\n\t} );\n\n/* global angular, window */\n\n// OpenGarage\nangular.module( \"opengarage.utils\", [] )\n    .factory( \"Utils\", [ \"$injector\", \"$rootScope\", function( $injector, $rootScope ) {\n\n\t\tvar isFireFox = /Firefox/.test( window.navigator.userAgent ),\n\t\t\tisIE = /MSIE\\s|Trident\\/|Edge\\//.test( window.navigator.userAgent ),\n\n\t        // Define storage wrapper functions\n\t        storage = {\n\t            get: function( query, callback ) {\n\t                callback = callback || function() {};\n\n                    var data = {},\n                        i;\n\n                    if ( typeof query === \"string\" ) {\n                        query = [ query ];\n                    }\n\n                    for ( i in query ) {\n                        if ( query.hasOwnProperty( i ) ) {\n                            data[ query[ i ] ] = localStorage.getItem( query[ i ] );\n                        }\n                    }\n\n                    callback( data );\n\t            },\n\t            set: function( query, callback ) {\n\t                callback = callback || function() {};\n\n                    var i;\n                    if ( typeof query === \"object\" ) {\n                        for ( i in query ) {\n                            if ( query.hasOwnProperty( i ) ) {\n                                localStorage.setItem( i, query[ i ] );\n                            }\n                        }\n                    }\n\n                    callback( true );\n\t            },\n\t            remove: function( query, callback ) {\n\t                callback = callback || function() {};\n\n                    var i;\n\n                    if ( typeof query === \"string\" ) {\n                        query = [ query ];\n                    }\n\n                    for ( i in query ) {\n                        if ( query.hasOwnProperty( i ) ) {\n                            localStorage.removeItem( query[ i ] );\n                        }\n                    }\n\n                    callback( true );\n\t            }\n\t        },\n\t        getControllerSettings = function( callback, ip ) {\n\t\t\t\tif ( !ip && !$rootScope.activeController ) {\n\t\t\t\t\tcallback( false );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t$http = $http || $injector.get( \"$http\" );\n\n\t\t\t\tvar promise;\n\n\t\t\t\tif ( !ip && ( $rootScope.activeController && $rootScope.activeController.auth ) ) {\n\t\t\t\t\tpromise = $http( {\n\t\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\t\turl: \"https://opensprinkler.com/wp-admin/admin-ajax.php\",\n\t\t                headers: { \"Content-Type\": \"application/x-www-form-urlencoded; charset=UTF-8\" },\n\t\t\t\t\t\tdata: \"action=blynkCloud&path=\" + encodeURIComponent( $rootScope.activeController.auth + \"/query\" ),\n\t\t\t\t\t\tsuppressLoader: true\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\tpromise = $http( {\n\t\t\t\t\t\tmethod: \"GET\",\n\t\t\t\t\t\turl: \"http://\" + ( ip || $rootScope.activeController.ip ) + \"/jc\",\n\t\t\t\t\t\tsuppressLoader: ip ? false : true\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t            return promise.then(\n\t\t\t\t\tfunction( result ) {\n\t\t\t\t\t\tif ( !ip && ( $rootScope.activeController && $rootScope.activeController.auth ) ) {\n\t\t\t\t\t\t\t$filter = $filter || $injector.get( \"$filter\" );\n\t\t\t\t\t\t\tvar filter = $filter( \"filter\" );\n\n\t\t\t\t\t\t\tresult = result.data[ 0 ].pins;\n\t\t\t\t\t\t\tcallback( {\n\t\t\t\t\t\t\t\tdoor: parseInt( filter( result, { \"pin\": 0 } )[ 0 ].value ),\n\t\t\t\t\t\t\t\tdist: parseInt( filter( result, { \"pin\": 3 } )[ 0 ].value ),\n\t\t\t\t\t\t\t\trcnt: parseInt( filter( result, { \"pin\": 4 } )[ 0 ].value )\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcallback( result.data );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfunction() {\n\t\t\t\t\t\tcallback( false );\n\t\t\t\t\t}\n\t\t\t\t);\n\t        },\n\t        getControllerOptions = function( callback, ip, showLoader ) {\n\t\t\t\tif ( !ip && !$rootScope.activeController ) {\n\t\t\t\t\tcallback( false );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t$http = $http || $injector.get( \"$http\" );\n\n\t            return $http( {\n\t                method: \"GET\",\n\t                url: \"http://\" + ( ip || $rootScope.activeController.ip ) + \"/jo\",\n\t                suppressLoader: showLoader ? false : true\n\t            } ).then(\n\t\t\t\t\tfunction( result ) {\n\t\t\t\t\t\tcallback( result.data );\n\t\t\t\t\t},\n\t\t\t\t\tfunction() {\n\t\t\t\t\t\tcallback( false );\n\t\t\t\t\t}\n\t\t\t\t);\n\t        },\n\t        updateController = function() {\n\t\t\t\t$q = $q || $injector.get( \"$q\" );\n\n\t\t\t\tvar controller = angular.copy( $rootScope.activeController ),\n\t\t\t\t\tsave = function( data ) { angular.extend( controller, data ); };\n\n\t\t\t\t$q.when()\n\t\t\t\t\t.then( function() { return getControllerSettings( save ); } )\n\t\t\t\t\t.then( function() { return getControllerOptions( save ); } )\n\t\t\t\t\t.then( function() {\n\t\t\t\t\t\tvar index = $rootScope.controllers.indexOf( $rootScope.activeController );\n\n\t\t\t\t\t\t$rootScope.controllers.splice( index, 1 );\n\t\t\t\t\t\t$rootScope.controllers.splice( index, 0, controller );\n\t\t\t\t\t\t$rootScope.activeController = controller;\n\n\t\t\t\t\t\tstorage.set( { \"controllers\": JSON.stringify( $rootScope.controllers ), \"activeController\": JSON.stringify( $rootScope.activeController ) } );\n\t\t\t\t\t} );\n\t        },\n\t\t\taddController = function( data, callback ) {\n\t\t\t\t$ionicPopup = $ionicPopup || $injector.get( \"$ionicPopup\" );\n\n\t\t\t\tif ( !data.ip || !data.password ) {\n\t\t\t\t\t$ionicPopup.alert( {\n\t\t\t\t\t\ttemplate: \"<p class='center'>Both an IP and password are required.</p>\"\n\t\t\t\t\t} );\n\t\t\t\t\tcallback( false );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tgetControllerSettings( function( result ) {\n\t\t\t\t\tif ( result && result.cid ) {\n\t\t\t\t\t\tresult.ip = data.ip;\n\t\t\t\t\t\tresult.password = data.password;\n\n\t\t\t\t\t\t$filter = $filter || $injector.get( \"$filter\" );\n\n\t\t\t\t\t\tif ( $filter( \"filter\" )( $rootScope.controllers, { \"cid\": result.cid } ).length > 0 ) {\n\t\t\t\t\t\t\t$ionicPopup.alert( {\n\t\t\t\t\t\t\t\ttemplate: \"<p class='center'>Device already added to site list.</p>\"\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\tcallback( false );\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgetControllerOptions( function( reply ) {\n\t\t\t\t\t\t\tangular.extend( result, reply );\n\t\t\t\t\t\t\t$rootScope.controllers.push( result );\n\t\t\t\t\t\t\tstorage.set( { controllers: JSON.stringify( $rootScope.controllers ) } );\n\t\t\t\t\t\t\tcallback( true );\n\t\t\t\t\t\t}, data.ip );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$ionicPopup.alert( {\n\t\t\t\t\t\t\ttemplate: \"<p class='center'>Unable to find device. Please verify the IP/password and try again.</p>\"\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tcallback( false );\n\t\t\t\t\t}\n\t\t\t\t}, data.ip );\n\t\t\t},\n\t\t\t$http, $q, $filter, $ionicPopup;\n\n\t    if ( isFireFox ) {\n\t\t\tHTMLElement.prototype.click = function() {\n\t\t\t\tvar evt = this.ownerDocument.createEvent( \"MouseEvents\" );\n\t\t\t\tevt.initMouseEvent( \"click\", true, true, this.ownerDocument.defaultView, 1, 0, 0, 0, 0, false, false, false, false, 0, null );\n\t\t\t\tthis.dispatchEvent( evt );\n\t\t\t};\n\t    }\n\n\t    // Return usable functions\n\t    return {\n\t\t\tisIE: isIE,\n\t        storage: storage,\n\t        getControllerSettings: getControllerSettings,\n\t        getControllerOptions: getControllerOptions,\n\t        updateController: updateController,\n\t\t\tshowAddController: function( callback ) {\n\t\t\t\tcallback = callback || function() {};\n\t\t\t\t$ionicPopup = $ionicPopup || $injector.get( \"$ionicPopup\" );\n\n\t\t\t\tvar scope = $rootScope.$new();\n\t\t\t\tscope.data = {};\n\n\t\t\t\t$ionicPopup.show( {\n\t\t\t\t\ttemplateUrl: \"templates/addController.html\",\n\t\t\t\t\ttitle: \"Add Controller\",\n\t\t\t\t\tscope: scope,\n\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t{ text: \"Cancel\" },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: \"<b>Add</b>\",\n\t\t\t\t\t\t\ttype: \"button-positive\",\n\t\t\t\t\t\t\tonTap: function( e ) {\n\t\t\t\t\t\t\t\tif ( !scope.data.ip || !scope.data.password ) {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t} ).then(\n\t\t\t\t\tfunction( isValid ) {\n\t\t\t\t\t\tif ( isValid ) {\n\t\t\t\t\t\t\taddController( scope.data, callback );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t},\n\t\t\ttoggleDoor: function( callback ) {\n\t\t\t\tcallback = callback || function() {};\n\t\t\t\t$http = $http || $injector.get( \"$http\" );\n\n\t\t\t\tvar promise;\n\n\t\t\t\tif ( $rootScope.activeController && $rootScope.activeController.auth ) {\n\t\t\t\t\tpromise = $http( {\n\t\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\t\turl: \"https://opensprinkler.com/wp-admin/admin-ajax.php\",\n\t\t                headers: { \"Content-Type\": \"application/x-www-form-urlencoded; charset=UTF-8\" },\n\t\t\t\t\t\tdata: \"action=blynkCloud&path=\" + encodeURIComponent( $rootScope.activeController.auth + \"/update/V1?value=1\" )\n\t\t\t\t\t} ).then( function() {\n\t\t\t\t\t\t$http( {\n\t\t\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\t\t\turl: \"https://opensprinkler.com/wp-admin/admin-ajax.php\",\n\t\t\t                headers: { \"Content-Type\": \"application/x-www-form-urlencoded; charset=UTF-8\" },\n\t\t\t\t\t\t\tdata: \"action=blynkCloud&path=\" + encodeURIComponent( $rootScope.activeController.auth + \"/update/V1?value=0\" )\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\tpromise = $http.get( \"http://\" + $rootScope.activeController.ip + \"/cc?dkey=\" + encodeURIComponent( $rootScope.activeController.password ) + \"&click=1\" );\n\t\t\t\t}\n\n\t            promise.then(\n\t\t\t\t\tfunction() {\n\t\t\t\t\t\tcallback( true );\n\t\t\t\t\t},\n\t\t\t\t\tfunction() {\n\t\t\t\t\t\tcallback( false );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t},\n\t\t\tsaveOptions: function( settings, callback ) {\n\t\t\t\t$http = $http || $injector.get( \"$http\" );\n\n\t            return $http( {\n\t                method: \"GET\",\n\t                url: \"http://\" + $rootScope.activeController.ip + \"/co?dkey=\" + $rootScope.activeController.password,\n\t\t\t\t\tparams: settings,\n\t\t\t\t\tparamSerializer: \"$httpParamSerializerJQLike\"\n\t            } ).then(\n\t\t\t\t\tfunction( result ) {\n\t\t\t\t\t\tcallback( result.data );\n\t\t\t\t\t},\n\t\t\t\t\tfunction() {\n\t\t\t\t\t\tcallback( false );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t},\n\t\t\tchangePassword: function() {\n\t\t\t\t$ionicPopup = $ionicPopup || $injector.get( \"$ionicPopup\" );\n\n\t\t\t\tvar scope = $rootScope.$new();\n\t\t\t\tscope.pwd = {};\n\n\t\t\t\t$ionicPopup.show( {\n\t\t\t\t\ttemplateUrl: \"templates/changePassword.html\",\n\t\t\t\t\ttitle: \"Change Password\",\n\t\t\t\t\tscope: scope,\n\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t{ text: \"Cancel\" },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: \"<b>Go</b>\",\n\t\t\t\t\t\t\ttype: \"button-positive\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t} ).then( function() {\n\t\t\t\t\tif ( !scope.pwd.nkey || !scope.pwd.ckey || scope.pwd.nkey !== scope.pwd.ckey  ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t$http = $http || $injector.get( \"$http\" );\n\n\t\t            $http( {\n\t\t                method: \"GET\",\n\t\t                url: \"http://\" + $rootScope.activeController.ip + \"/co?dkey=\" + $rootScope.activeController.password,\n\t\t\t\t\t\tparams: scope.pwd,\n\t\t\t\t\t\tparamSerializer: \"$httpParamSerializerJQLike\"\n\t\t            } ).then( function() {\n\t\t\t\t\t\t$rootScope.activeController.password = scope.pwd.nkey;\n\n\t\t\t\t\t\tvar index = $rootScope.controllers.indexOf( $rootScope.activeController );\n\t\t\t\t\t\t$rootScope.controllers.splice( index, 1 );\n\t\t\t\t\t\t$rootScope.controllers.splice( index, 0, $rootScope.activeController );\n\n\t\t\t\t\t\tstorage.set( { \"controllers\": JSON.stringify( $rootScope.controllers ), \"activeController\": JSON.stringify( $rootScope.activeController ) } );\n\n\t\t\t\t\t\t$ionicPopup.alert( {\n\t\t\t\t\t\t\ttemplate: \"<p class='center'>Password updated succesfully!</p>\"\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t},\n\t\t\tgetLogs: function( callback ) {\n\t\t\t\t$http = $http || $injector.get( \"$http\" );\n\n\t            $http( {\n\t                method: \"GET\",\n\t                url: \"http://\" + $rootScope.activeController.ip + \"/jl\"\n\t            } ).then(\n\t\t\t\t\tfunction( result ) {\n\t\t\t\t\t\tcallback( result.data.logs.reverse() );\n\t\t\t\t\t},\n\t\t\t\t\tfunction() {\n\t\t\t\t\t\tcallback( false );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t    };\n} ] );\n"],"sourceRoot":"/source/"}